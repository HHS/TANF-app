---
version: 1
applications:
- name: tdp-frontend
  memory: 256M
  instances: 1
  disk_quota: 256M
  timeout: 180
  buildpacks:
    - https://github.com/cloudfoundry/nginx-buildpack.git#v1.2.6
    - https://github.com/cloudfoundry/binary-buildpack
  processes:
    - type: worker
      memory: 64M
      instances: 1
      disk_quota: 512M
      command: |
        wget https://github.com/grafana/loki/releases/download/v3.1.1/promtail-linux-amd64.zip &&
        unzip -a promtail-linux-amd64.zip && rm -rf promtail-linux-amd64.zip &&
        ./promtail-linux-amd64 -config.file=./promtail.config.yml

